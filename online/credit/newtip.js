define("ecom/common/api/credit/newtip",function(){function t(t){return String(t).replace(/[#%&+=\/\\\ \\u3000\f\r\n\t]/g,function(t){return"%"+(256+t.charCodeAt()).toString(16).substring(1).toUpperCase()})}function e(t,e){if(arguments.length<2&&void 0===e)return t;var i=t,n=Array.prototype.slice,r=n.call(arguments,2);return function(){var t=n.call(arguments,0);i.apply(e,r.concat(t))}}function i(e,i){var n,r=[],a=i||function(e){return t(e)};return $.each(e,function(t,e){if($.isArray(e))for(n=e.length;n--;)r.push(t+"="+a(e[n],t));else r.push(t+"="+a(e,t))}),r.join("&")}function n(t){return new Function("return ("+t+")")()}function r(t){var e=S.statistics;if(e&&e[t]&&e[t].url){var i=window.bds||{},n="";i&&i.comm&&i.comm.qid&&(n=i.comm.qid);var r={qid:n,url:window.document.location.href,timestamp:+new Date};P=e[t].url,$.extend(r,e[t].query||{}),O(r)}}function a(t,e){return e=e||{},$.format(I[t],e)}function o(t,e){var i={},n="";if(t){var r=[];for(var o in t)"billing"!==o&&"url"!==o&&"text"!==o&&r.push("'"+o+"':'"+t[o]+"'");i={billing:t.billing&&' class="EC_PP"',url:t.url,text:t.text||e,options:r.join(",")},n=a("a",i)}return n}function s(t,e){var i="";if(e){var n=o(e.a,y);i=a(t,{text:e.text,a:n,img:e.img})}return i}function c(t,e){var i=t.attr(e);return i&&n(i)}function l(t){var e,i=s("medical",t.medical);t.identity&&(e=t.identity.img?s("identityImg",t.identity):s("identity",t.identity));var n,r=s("credit",t.identity);n=t.personal&&t.personal.img?s("personalImg",t.personal):s("personal",t.personal);var o=s("airline",t.airline),c=s("dfa",t.dfa),l=a("list",{medical:i,credit:r,airline:o,dfa:c,personal:n}),m=""+l;return m}function m(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=a("commitmentItem",{text:t[i].text,url:t[i].url,fm:t[i].fm,p1:t[i].p1}));var n=a("commitmentList",{commitmentContent:e});return n}function u(t,i){for(var n=$("."+i.clsList.join(",.")),r=i.attrKey,a=i.tipTitle,o=0,s=n.length;s>o;o++){var c=$(n[o]);if("identity"!==t){var l=c.parent();if(l.length&&l.hasClass("EC_PP")){var m=new bds.se.tip({target:c[0]});m.onShow=e(p,m,t,r,a)}}else if(c.parents(".EC_ppim_top").length||c.parents(".EC_im").length||c.parents(".ec_pp_top").length){var m=new bds.se.tip({target:c[0]});m.onShow=e(p,m,t,r)}}}function p(t,e,i){"identity"===t&&r(t);var n=this;if(!n.alreadyRender){n.op.offset=S.offset[t];var o=n.getTarget(),s=$(o),u=s.width();if(isNaN(u)&&(u=0),u>20&&(n.op.arrow.offset=u/2),s.attr("data-tip-limite")){var p=s.parents(".EC_im"),f=parseInt(p.position().left,10),d=parseInt(p.width(),10),h=parseInt(s.position().left,10),g=Math.abs(f+d-D-h);n.op.offset={x:g,y:25},n.op.arrow={has:1,offset:u>20?g+u/3:g}}var v="",y=c(s,e);switch(t){case"identity":var b=s.attr("href");y.identity&&y.identity.a&&!y.identity.a.url&&(y.identity.a.url=b),y.personal&&y.personal.a&&!y.personal.a.url&&(y.personal.a.url=b),v=l(y),n.setTitle(y.title);break;case"commitment":v=m(y);break;case"med":v=a(t,y),n.setTitle(C);break;case"air":v=a(t,y),n.setTitle(L);break;case"coupon":for(var w=n.getDom().find("a"),x=[],T=0,_=w.length;_>T;T++)"a"===w[T].tagName.toLowerCase()&&x.push(w[T]);x.length&&E.pl.ck(x,E.pl.imTimesign);case"tel":default:v=a(t,y),i&&n.setTitle(i)}if(n.setContent(v),"identity"===t&&y[t]&&y[t].process){var k=y[t].process,I=y[t].process_level;A.use("honourCard",function(){A.ui.honourCard(n.getDom().find(".EC-credit")[0],y[t].a.url,I,k,y[t].a)})}n.alreadyRender=!0}}function f(){bds&&bds.se&&bds.se.tip?(h&&clearTimeout(h),$.each(H,function(t,e){u(t,e)})):h=setTimeout(function(){f()},10)}function d(t){$(document).ready(function(){$.extend(!0,S,t||{}),f()})}var h,g="\u5df2\u7ecf\u901a\u8fc7",v="\u5177\u6709",y="\u767e\u5ea6\u4fe1\u8a89\u8ba4\u8bc1",b="\u4f18\u60e0\u8be6\u60c5",w="\u54a8\u8be2\u7535\u8bdd",x="\u56fd\u5bb6\u836f\u76d1\u5c40",T="\u6388\u6743\u7684\u7f51\u4e0a\u552e\u836f\u8d44\u683c",C="\u6b63\u89c4\u836f\u54c1\u9500\u552e\u7f51\u7ad9\uff1a",_="\u4e2d\u822a\u534f\u8ba4\u8bc1",L="\u6b63\u89c4\u7f51\u4e0a\u552e\u7968\u7f51\u7ad9\uff1a",k="\u7684\u673a\u7968\u4ee3\u7406\u8d44\u683c",I={a:'<span#{billing}><a target="_blank"  href="#{url}" onmousedown="return c({\'title\':this.innerHTML,\'url\':this.href,#{options}});">#{text}</a></span>',list:'<div class="c-tip-cer"><ul>#{credit}#{medical}#{dfa}#{airline}#{identity}#{personal}</ul></div>',medical:"<li><span>#{text}</span></li>",identity:'<li class="c-tip-item-i"><i class="c-icon c-icon-v-noborder c-gap-icon-right-small c-tip-item-icon"></i>'+g+"#{text}#{a}</li>",identityImg:'<li class="c-tip-item-i"><img class="c-customicon c-gap-icon-right-small c-tip-item-icon" src="#{img}">'+g+"#{text}#{a}</li>",credit:'<li class="EC-credit"></li>',personal:'<li class="c-tip-item-i"><i class="c-icon c-icon-person-noborder c-gap-icon-right-small c-tip-item-icon"></i>'+g+"#{text}#{a}</li>",personalImg:'<li class="c-tip-item-i"><img height=16 width=16 class="c-customicon c-gap-icon-right-small c-tip-item-icon" src="#{img}">'+g+"#{text}#{a}</li>",airline:"<li>"+v+"#{a}\u7684#{text}</li>",dfa:"<li>#{text}</li>",coupon:'<div class="c-tip-info EC_PP"><a target="_blank" href="#{url}" class="coupon-ck" onmousedown="return c({\'title\':this.innerHTML,\'url\':this.href,'+"'fm':'#{fm}','rsv_ct':'#{rsv_ct}','p1':#{p1},'p2':#{p2}});\">#{text}</a></div>",tel:'<div class="c-tip-info">#{text}</div>',commitmentList:'<div class="c-tip-info"><ul>#{commitmentContent}</ul></div>',commitmentItem:"<li class=\"c-tip-item-i\"><span><i class=\"c-icon c-icon-circle-blue-s ec-vertical-baseline c-gap-icon-right-small c-tip-item-icon\"></i><a href=#{url} target=\"_blank\" onmousedown=\"return c({'title': this.innerHTML,'url': this.href,'fm': '#{fm}','p1': '#{p1}'});\">#{text}</a></span></li>",med:'<div class="c-tip-info"><ul><li class="c-tip-item-i"><i class="c-icon c-icon-sfda c-gap-icon-right-small c-tip-item-icon"></i>'+v+"<a href='http://www.sda.gov.cn/WS01/CL0001/'  target=\"_blank\">"+x+"</a>"+T+"</li></ul></div>",air:'<div class="c-tip-info"><ul><li class="c-tip-item-i"><img class="c-customicon c-gap-icon-right-small c-tip-item-icon" src="http://bs.baidu.com/chuangxin/n2_jp_bg.gif">'+v+"<a href='http://www.cata.org.cn/'  target=\"_blank\">"+_+"</a>"+k+"</li></ul></div>"},S={offset:{identity:{x:10,y:25},commitment:{x:10,y:25},coupon:{x:10,y:25},tel:{x:10,y:25},med:{x:10,y:25},air:{x:10,y:25}}},D=374,H={identity:{clsList:["c-icon-v","c-icon-high-v","c-icon-person"],attrKey:"data-renzheng"},coupon:{clsList:["c-icon-hui","asdsa"],attrKey:"data-coupon",tipTitle:b+"\uff1a"},tel:{clsList:["c-icon-phone"],attrKey:"data-phone",tipTitle:w+"\uff1a"},commitment:{clsList:["c-icon-nuo"],attrKey:"data-commitment"},med:{clsList:["c-icon-med"],attrKey:"data-med"},air:{clsList:["c-icon-air"],attrKey:"data-air"}},P="",O=function(){var t=[],e=function(t){return encodeURIComponent(t)};return function(n){var r=t.push(new Image)-1;t[r].onload=t[r].onerror=function(){t[r]=t[r].onload=t[r].onerror=null,delete t[r]};var a=P+"?"+i(n,e);t[r].src=a}}();return{init:d}});